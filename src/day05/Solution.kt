package day05

fun main() {
    val seeds: List<Long> = listOf(3640772818, 104094365, 1236480411, 161072229, 376099792, 370219099, 1590268366, 273715765, 3224333694, 68979978, 2070154278, 189826014, 3855332650, 230434913, 3033760782, 82305885, 837883389, 177854788, 2442602612, 571881366)

    var minLocation = 99999999999999
    for (seed in seeds) {
        val location = findLocation(seed)

        if (location < minLocation) {
            minLocation = location
        }
    }

    println("What is the lowest location number that corresponds to any of the initial seed numbers?")
    println(minLocation.toString())
}

fun findLocation(seed: Long): Long {
    val seed2soil: List<List<Long>> = listOf(
        listOf(496269031, 1203272644, 52136246),
        listOf(548405277, 496269031, 457095898),
        listOf(1005501175, 953364929, 249907715),
    )
    val soil2fertilizer: List<List<Long>> = listOf(
        listOf(217408321, 2086205436, 25053699),
        listOf(2604208456, 1670861921, 31003781),
        listOf(1631572552, 0, 258383552),
        listOf(129225554, 3768288787, 36192668),
        listOf(2421205388, 2905533654, 126666762),
        listOf(242462020, 3399542287, 357404885),
        listOf(866152503, 3032200416, 253960559),
        listOf(2039921781, 2262442546, 381283607),
        listOf(2635212237, 2714844607, 190689047),
        listOf(3613008578, 1753855801, 23976114),
        listOf(3636984692, 1503365158, 167496763),
        listOf(1340671861, 2111259135, 274956),
        listOf(1889956104, 806620565, 149965677),
        listOf(0, 3286160975, 113381312),
        listOf(2987089260, 956586242, 546778916),
        listOf(2547872150, 3756947172, 11341615),
        listOf(3846919647, 3807789063, 43277850),
        listOf(3533868176, 258383552, 79140402),
        listOf(165418222, 1701865702, 51990099),
        listOf(1120113062, 586061766, 220558799),
        listOf(2559213765, 2217447855, 44994691),
        listOf(3807789063, 4255836712, 39130584),
        listOf(3890197497, 3851066913, 404769799),
        listOf(1340946817, 1777831915, 42087923),
        listOf(2881175496, 2111534091, 105913764),
        listOf(113381312, 2643726153, 15844242),
        listOf(1383034740, 337523954, 248537812),
        listOf(2825901284, 2659570395, 55274212),
        listOf(599866905, 1819919838, 266285598),
    )
    val fertilizer2water: List<List<Long>> = listOf(
        listOf(3950520280, 1751042330, 139651634),
        listOf(936578795, 3912173308, 42397072),
        listOf(3553681000, 1722281506, 28760824),
        listOf(697953317, 651809140, 90189394),
        listOf(3582441824, 876081661, 368078456),
        listOf(978975867, 2358439651, 252255693),
        listOf(1495879532, 2678320518, 199775133),
        listOf(1910380638, 3308279888, 122339216),
        listOf(3355092099, 1561901004, 91630618),
        listOf(3187667509, 2033753243, 70292073),
        listOf(2752202873, 3816184128, 41568037),
        listOf(648600286, 479585511, 49353031),
        listOf(3149600631, 2356473769, 1965882),
        listOf(1695654665, 2629130810, 49189708),
        listOf(201901143, 385568770, 94016741),
        listOf(536376004, 741998534, 3182157),
        listOf(2472303091, 3954570380, 279899782),
        listOf(539558161, 257732262, 15304877),
        listOf(3131165165, 2610695344, 18435466),
        listOf(3446722717, 1890693964, 106958283),
        listOf(2793770910, 1653531622, 40823934),
        listOf(9849113, 65680232, 192052030),
        listOf(2878736712, 2104045316, 252428453),
        listOf(1792836692, 2878095651, 117543946),
        listOf(2172585320, 1244160117, 273599019),
        listOf(2060645804, 3884012463, 28160845),
        listOf(3257959582, 3719051611, 97132517),
        listOf(408449515, 745180691, 127926489),
        listOf(876081661, 4234470162, 60497134),
        listOf(1231231560, 3043631916, 264647972),
        listOf(3151566513, 1997652247, 36100996),
        listOf(2446184339, 3430619104, 26118752),
        listOf(803816626, 582518586, 69290554),
        listOf(554863038, 9849113, 40157204),
        listOf(2146325022, 3857752165, 26260298),
        listOf(788142711, 50006317, 15673915),
        listOf(295917884, 273037139, 112531631),
        listOf(2834594844, 1517759136, 44141868),
        listOf(4090171914, 3456737856, 204795382),
        listOf(2088806649, 3661533238, 57518373),
        listOf(1744844373, 2995639597, 47992319),
        listOf(2032719854, 1694355556, 27925950),
        listOf(595020242, 528938542, 53580044),
    )
    val water2light: List<List<Long>> = listOf(
        listOf(556810106, 840812947, 14926117),
        listOf(2598413684, 2184905392, 114045192),
        listOf(2130064037, 1600958027, 248227533),
        listOf(1271028210, 1253957270, 39538107),
        listOf(3521286912, 4262821917, 32145379),
        listOf(1930562940, 1944404618, 64932992),
        listOf(4252373354, 3302720391, 42593942),
        listOf(1109026743, 279496091, 162001467),
        listOf(725777554, 2565853410, 3969864),
        listOf(2712458876, 1330352326, 185715465),
        listOf(4039742261, 3173278185, 129442206),
        listOf(0, 2064417497, 120487895),
        listOf(299311037, 855739064, 257499069),
        listOf(729747418, 1849185560, 95219058),
        listOf(1373001379, 767226476, 66231296),
        listOf(571736223, 688212171, 79014305),
        listOf(1878676528, 2890412515, 51886412),
        listOf(2898174341, 682278717, 5933454),
        listOf(1781236499, 441497558, 97440029),
        listOf(3090089298, 3673052565, 50139248),
        listOf(1365646204, 833457772, 7355175),
        listOf(1738475707, 2412172480, 42760792),
        listOf(1995495932, 2569823274, 134568105),
        listOf(3193548680, 3476912261, 196140304),
        listOf(824966476, 538937587, 143341130),
        listOf(3553432291, 3723191813, 486309970),
        listOf(3140228546, 4209501783, 53320134),
        listOf(968307606, 1113238133, 140719137),
        listOf(4169184467, 3090089298, 83188887),
        listOf(650750528, 204469065, 75027026),
        listOf(1439232675, 2704391379, 186021136),
        listOf(2511835025, 1516067791, 84890236),
        listOf(1625253811, 2298950584, 113221896),
        listOf(3389688984, 3345314333, 131597928),
        listOf(2378291570, 0, 22623317),
        listOf(2596725261, 2942298927, 1688423),
        listOf(1310566317, 2009337610, 55079887),
        listOf(2940964744, 201446459, 3022606),
        listOf(120487895, 22623317, 178823142),
        listOf(2904107795, 1293495377, 36856949),
        listOf(2400914887, 2454933272, 110920138),
    )
    val light2temperature: List<List<Long>> = listOf(
        listOf(1244459013, 624435822, 80444775),
        listOf(2608592263, 3309263777, 172991510),
        listOf(3165402867, 2278806547, 335097905),
        listOf(292819381, 1643978777, 105413752),
        listOf(704475267, 462426854, 15399493),
        listOf(3696584161, 2678497330, 345840247),
        listOf(2891254573, 3613542439, 34162874),
        listOf(1894523870, 281665589, 180761265),
        listOf(1706897891, 1456352798, 187625979),
        listOf(398233133, 1877125477, 198159658),
        listOf(4176101046, 3482255287, 104541624),
        listOf(2278806547, 3662029939, 329785716),
        listOf(3500500772, 4098883907, 196083389),
        listOf(4280642670, 3647705313, 14324626),
        listOf(4149492660, 3024337577, 11203522),
        listOf(85784517, 0, 207034864),
        listOf(2925417447, 3231118601, 78145176),
        listOf(0, 1749392529, 85784517),
        listOf(4160696182, 3215713737, 15404864),
        listOf(4042424408, 3991815655, 107068252),
        listOf(1129076520, 207034864, 74630725),
        listOf(596392791, 1348270322, 108082476),
        listOf(3100809989, 2613904452, 64592878),
        listOf(1326100451, 1114082357, 234187965),
        listOf(2864509045, 3586796911, 26745528),
        listOf(2781583773, 3132788465, 82925272),
        listOf(1560288416, 477826347, 146609475),
        listOf(3003562623, 3035541099, 97247366),
        listOf(719874760, 704880597, 409201760),
        listOf(1324903788, 1875928814, 1196663),
        listOf(1203707245, 1835177046, 40751768),
    )
    val temperature2humidity: List<List<Long>> = listOf(
        listOf(2622049454, 736812858, 79169969),
        listOf(3979548277, 2854489162, 116161222),
        listOf(0, 2175018874, 84480806),
        listOf(567798788, 2400631546, 48501534),
        listOf(3627076350, 2837901836, 16587326),
        listOf(1459224370, 1289368272, 21397154),
        listOf(3018037189, 3252694507, 93925363),
        listOf(4095709499, 4063232797, 21404553),
        listOf(1675574530, 2560175285, 695067),
        listOf(650203851, 328659590, 327259736),
        listOf(3143763337, 3475937023, 49576),
        listOf(1591893253, 2091337597, 83681277),
        listOf(3655324442, 3516768137, 39649206),
        listOf(1125784995, 2259499680, 94582805),
        listOf(1082589333, 280432563, 43195662),
        listOf(1676269597, 1011614859, 3965286),
        listOf(3955996260, 4039680780, 23552017),
        listOf(2701219423, 684725863, 52086995),
        listOf(977463587, 2387091631, 13539915),
        listOf(3643663676, 3346619870, 11660766),
        listOf(3143812913, 3556417343, 483263437),
        listOf(2907111949, 3358280636, 110925240),
        listOf(2293944099, 2615629615, 132579811),
        listOf(991003502, 920029028, 91585831),
        listOf(1513630670, 1015580145, 78262583),
        listOf(196718861, 1310765426, 316320664),
        listOf(1680234883, 1638774240, 331394507),
        listOf(2011629390, 815982827, 1882146),
        listOf(2874635247, 4084637350, 32476702),
        listOf(3701704795, 2998403042, 254291465),
        listOf(2426523910, 1093842728, 195525544),
        listOf(2837901836, 3475986599, 8980753),
        listOf(3694973648, 3469205876, 6731147),
        listOf(3111962552, 3484967352, 31800785),
        listOf(616300322, 662956301, 21769562),
        listOf(1220367800, 1627086090, 10492300),
        listOf(1480621524, 2354082485, 33009146),
        listOf(2846882589, 2970650384, 27752658),
        listOf(1352028950, 323628225, 5031365),
        listOf(2753306418, 655919326, 7036975),
        listOf(513039525, 2560870352, 54759263),
        listOf(84480806, 1637578390, 1195850),
        listOf(2013511536, 0, 280432563),
        listOf(85676656, 2449133080, 111042205),
        listOf(1357060315, 817864973, 102164055),
        listOf(638069884, 2748209426, 12133967),
        listOf(1230860100, 1970168747, 121168850),
    )
    val humidity2location: List<List<Long>> = listOf(
        listOf(3071447765, 3790677895, 35519893),
        listOf(501148922, 1470714761, 60946444),
        listOf(949413779, 3960084356, 1114317),
        listOf(2276139972, 547813284, 42132370),
        listOf(261623667, 0, 220957931),
        listOf(0, 220957931, 207965683),
        listOf(2629055810, 2988733812, 367963097),
        listOf(936813255, 2507216386, 12600524),
        listOf(3106967658, 2402339659, 33240399),
        listOf(909841910, 3356696909, 11084951),
        listOf(1030029700, 920191219, 341387512),
        listOf(2503236334, 3572469232, 125819476),
        listOf(1371417212, 1666455982, 273052538),
        listOf(2997018907, 3367781860, 25674024),
        listOf(3311094548, 2519816910, 468916902),
        listOf(2021404744, 1531661205, 83389724),
        listOf(3140208057, 1939508520, 59879232),
        listOf(259387264, 428923614, 2236403),
        listOf(950528096, 1334878052, 79501604),
        listOf(2446901229, 1414379656, 56335105),
        listOf(1644469750, 3393455884, 140294896),
        listOf(3022692931, 3698288708, 48754834),
        listOf(4042169428, 1999387752, 252797868),
        listOf(1805974329, 3981490698, 215430415),
        listOf(1784764646, 501148922, 21209683),
        listOf(889549885, 3961198673, 20292025),
        listOf(3780011450, 522358605, 10399946),
        listOf(2104794468, 1261578731, 73299321),
        listOf(3790411396, 3842084182, 118000174),
        listOf(2318272342, 2252185620, 113574154),
        listOf(4003450976, 3533750780, 38718452),
        listOf(2178093789, 4196921113, 98046183),
        listOf(3908411570, 3747043542, 43634353),
        listOf(562095366, 2435580058, 71636328),
        listOf(2431846496, 532758551, 15054733),
        listOf(920926861, 3826197788, 15886394),
        listOf(3952045923, 1615050929, 51405053),
        listOf(207965683, 431160017, 51421581),
        listOf(633731694, 2365759774, 36579885),
        listOf(670311579, 700952913, 219238306),
        listOf(3200087289, 589945654, 111007259),
    )
    val soil = translate(seed, seed2soil)
    val fertilizer = translate(soil, soil2fertilizer)
    val water = translate(fertilizer, fertilizer2water)
    val light = translate(water, water2light)
    val temperature = translate(light, light2temperature)
    val humidity = translate(temperature, temperature2humidity)

    return translate(humidity, humidity2location)
}

fun translate(input: Long, translationRules: List<List<Long>>): Long {

    for (rule in translationRules) {
        if (input in rule[1]..<(rule[1] + rule[2])) {
            val offset = input - rule[1]
            return rule[0] + offset
        }
    }

    return input
}
